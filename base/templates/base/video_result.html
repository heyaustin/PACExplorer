{% extends 'main.html' %}
{% load static %}
{% load myfilters %}
{% block extra_head %}
  <link rel="stylesheet" href="{% static 'styles/vd_result.css' %}" />
  <script src="https://kit.fontawesome.com/00e5774e18.js"
          crossorigin="anonymous"></script>
{% endblock %}
{% block content %}
  <div class="d-flex flex-column h100">
    <div class="m-3 mt-0 mb-5 prel h100">
      <div class="d-flex justify-content-center align-items-center">
        <div class="col-auto">
          <img src="{% static 'images/result.png' %}" alt="測試結果" class="img-fluid">
        </div>
      </div>
      <div class="d-flex justify-content-center align-items-center flex-column">
        <div class="col-md-auto mt-3">
          {% if percentage >= 60 %}
            <h2 class="text-success">完成率：{{ score }}／130</h2>
            <div class="text-success">親愛的冒險者您真的太優秀啦！恭喜完成遠船上船守則測試，請帶著這個衝勁到下一關繼續加油吧❤️</div>
          {% else %}
            <h2 class="text-danger">完成率：{{ score }}／130</h2>
            <div class="text-danger fs-5">親愛的冒險者，您本次任務失敗，未達及格標準，請再次嘗試</div>
          {% endif %}
        </div>
        <table class="table table-hover">
          <thead>
            <tr>
              <th scope="col" class="col-1">題號</th>
              <th scope="col" class="col-1">您的選項</th>
              <th scope="col" class="col-1">正確選項</th>
              <th scope="col" class="col-9">詳解</th>
            </tr>
          </thead>
          <tbody>
            {% for i in video_qa_range %}
              <tr {% if isCorrect|get_item:forloop.counter0 == True %} class="table-light" {% else %} class="table-danger" {% endif %}>
                <th scope="row" class="col-1">{{ i|add:"1" }}</th>
                <td class="col-1">
                  {% if isCorrect|get_item:forloop.counter0 == True %}
                    <i class="fa-solid fa-square-check" style="color: #00ff00;"></i>
                  {% else %}
                    <i class="fa-solid fa-square-xmark" style="color: #ff0000;"></i>
                  {% endif %}
                  {{ selectData|get_item:forloop.counter0|add:"1" }}
                </td>
                <td class="col-1">{{ correctAnswer|get_item:forloop.counter0|add:"1" }}</td>
                <td class="col-9">
                  {% if isCorrect|get_item:forloop.counter0 == True %}
                    回答正確
                  {% else %}
                    {{ explanation|get_item:forloop.counter0 }}
                  {% endif %}
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      <div class="back2">
        <a href="{% url 'home_page' %}">
          <img src="{% static 'images/back2.png' %}" alt="圖片不存在" class="img-fluid">
        </a>
      </div>
    </div>
  </div>
{% endblock content %}
{% block extraScript %}
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
{% endblock extraScript %}
